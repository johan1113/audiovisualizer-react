(this.webpackJsonpaudiovisualizer=this.webpackJsonpaudiovisualizer||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/wave.7540868e.svg"},125:function(e,t,a){e.exports=a(313)},130:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},309:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),i=a(25),l=a.n(i),s=a(54),r=a(26),c=a(11),u=(a(130),a(116)),h=a.n(u);var m=function(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),a=t[0],i=t[1];return Object(o.useEffect)((function(){var e=setInterval((function(){i((function(e){return e<5?e+1:0}))}),7e3);return function(){return clearInterval(e)}}),[]),n.a.createElement("div",{className:"home",style:{backgroundColor:["red","green","blue","yellow","pink","purple"][a]}},n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,"AUDIO VISUALIZER"),n.a.createElement("img",{src:h.a}),n.a.createElement(s.b,{to:"/audiovisualizer",className:"button"},"LET\xb4S START")))},d=a(39),g=a(118),f=a(9),p=a(119),v=a.n(p),b=a(21),C=(a(139),function(e,t,a){return new(function(){function o(){Object(d.a)(this,o),console.log("INGRESA AL CONSTRUCTOR DE AUDIO 3D"),this.songFile="https://iondrimbafilho.me/autotron.mp3",this.percent=0,this.playing=!1,this.volume=1,this.sceneBackGroundColor=t,this.objectsColor=a,this.rowTiles=[],this.groupTiles=new f.Object3D,this.complete(),this.scene=new f.Scene,this.scene.background=new f.Color(this.sceneBackGroundColor)}return Object(g.a)(o,[{key:"setSongFile",value:function(e){this.audioElement&&this.audioElement.pause(),this.songFile=e,console.log("///////////// ENTRA A CAMBIO DE AUDIO ////////////////"),this.setupAudio()}},{key:"setSceneColor",value:function(e){this.scene.background=new f.Color(e)}},{key:"setTalesColor",value:function(e){this.objectsColor=e}},{key:"setupAudio",value:function(){var e=this;this.audioElement=new Audio,this.audioElement.src=this.songFile,this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.85,this.source=this.audioCtx.createMediaElementSource(this.audioElement),this.source.connect(this.analyser),this.source.connect(this.audioCtx.destination),this.bufferLength=this.analyser.frequencyBinCount,this.frequencyData=new Uint8Array(this.bufferLength),this.audioElement.volume=this.volume,this.audioElement.addEventListener("playing",(function(){e.playing=!0})),this.audioElement.addEventListener("pause",(function(){e.playing=!1})),this.audioElement.addEventListener("ended",(function(){e.playing=!1,e.pause()}))}},{key:"complete",value:function(){var e=this;setTimeout((function(){e.firstRing=new f.Object3D,e.setupAudio(),e.createScene(),e.createCamera(),e.addAmbientLight(),e.addSpotLight(),e.addCameraControls(),e.addFloor(),e.animate(),e.addEventListener(),setInterval((function(){e.playing&&(e.addTilesRow(e.rowTiles),e.removeOldTiles(e.rowTiles))}),600)})),document.addEventListener("visibilitychange",(function(t){t.target.hidden?e.pause():e.play()}),!1)}},{key:"visibilityChange",value:function(){}},{key:"removeOldTiles",value:function(e){var t=this;if(e.length%25===0){var a=e[0],o=0;for(var n in a)a.hasOwnProperty(n)&&function(){var e=a[n];b.b.delayedCall(.07*o,(function(){b.b.to(e.scale,.5,{z:.01,ease:b.a.easeOut,onComplete:function(e){t.groupTiles.remove(e)},onCompleteParams:[e]})})),o++}();e=e.splice(0,1)}}},{key:"addTilesRow",value:function(e){var t=this,a=e.length&&e[e.length-1][0].position,o=[],n=0,i=0;e.length&&(i=e[e.length-1][0].position.x+1.05);for(var l=new f.BoxGeometry(.5,.5,5),s=new f.MeshLambertMaterial({color:this.objectsColor,emissive:0}),r=0;r<1;r++){o[r]=[],e.push([]);for(var c=function(c){var u={z:c,y:3,x:a?i:r};o[r][c]=u;var h=t.createObj(t.objectsColor,l,s);h.scale.set(1,1,.01),r>0&&(u.x=o[r-1][c].x*h.size+1.05),c>0&&(u.z=o[r][c-1].z*h.size+1.05),h.position.set(u.x,u.y,u.z),h.rotateX(t.radians(90)),t.groupTiles.add(h),b.b.delayedCall(.1*n,(function(){b.b.to(h.children[0].material,.3,{opacity:1,ease:b.a.easeOut})})),e[e.length-1].push(h),n++},u=0;u<8;u++)c(u);n++}o=null}},{key:"drawWave",value:function(){if(this.playing){this.analyser.getByteFrequencyData(this.frequencyData);for(var e=0,t=0;t<this.rowTiles.length;t++){for(var a=0;a<this.rowTiles[t].length;a++){var o=this.frequencyData[e],n=o/50<=0?.01:o/50;b.b.to(this.rowTiles[t][a].scale,.2,{z:n-3<0?.01:n-3}),e++}e++}}}},{key:"pause",value:function(){null!=this.audioElement&&this.audioElement.pause()}},{key:"play",value:function(){this.audioCtx.resume(),this.audioElement.play()}},{key:"createScene",value:function(){this.renderer=new f.WebGLRenderer({antialias:!0}),console.log("width: "+e.offsetWidth+"  //   height:"+e.offsetHeight),this.renderer.setSize(e.offsetWidth,e.offsetHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=f.PCFSoftShadowMap,this.groupTiles.position.set(10,0,-5),this.scene.add(this.groupTiles),e.appendChild(this.renderer.domElement)}},{key:"addEventListener",value:function(){var t=this;e.addEventListener("mouseup",(function(){requestAnimationFrame((function(){e.style.cursor="-moz-grab",e.style.cursor="-webkit-grab"}))})),e.addEventListener("mousedown",(function(){requestAnimationFrame((function(){e.style.cursor="-moz-grabbing",e.style.cursor="-webkit-grabbing"}))})),e.addEventListener("keyup",(function(e){32!==e.keyCode&&"Space"!==e.code||(t.playing?t.pause():t.play())}))}},{key:"createCamera",value:function(){this.camera=new f.PerspectiveCamera(30,e.offsetWidth/e.offsetHeight,1,1e3),this.camera.position.set(50,50,-50),this.scene.add(this.camera)}},{key:"addCameraControls",value:function(){this.controls=new v.a(this.camera)}},{key:"createObj",value:function(e,t,a){var o=new f.Mesh(t,a);o.castShadow=!0,o.receiveShadow=!0,o.position.z=-2.5,o.size=1,o.material.opacity=0,o.material.transparent=!0;var n=new f.Object3D;return n.add(o),n.size=1,n}},{key:"onResize",value:function(){var t=e.offsetWidth,a=e.offsetHeight;this.camera.aspect=t/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,a)}},{key:"addFloor",value:function(){var e=new f.PlaneGeometry(250,250),t=new f.ShadowMaterial({opacity:.05});this.floor=new f.Mesh(e,t),e.rotateX(-Math.PI/2),this.floor.position.y=0,this.floor.receiveShadow=!0,this.scene.add(this.floor)}},{key:"addSpotLight",value:function(){this.spotLight=new f.SpotLight(16777215),this.spotLight.position.set(-10,60,-10),this.spotLight.castShadow=!0,this.spotLight.angle=Math.PI/4,this.spotLight.penumbra=0,this.spotLight.decay=.5,this.spotLight.distance=100,this.spotLight.shadow.mapSize.width=1024,this.spotLight.shadow.mapSize.height=1024,this.spotLight.shadow.camera.near=10,this.spotLight.shadow.camera.far=100,this.scene.add(this.spotLight)}},{key:"addAmbientLight",value:function(){var e=new f.AmbientLight(16777215);this.scene.add(e)}},{key:"animate",value:function(){if(this.controls.update(),this.rowTiles[this.rowTiles.length-1]){var e=15-this.rowTiles[this.rowTiles.length-1][0].position.x;b.b.to(this.groupTiles.position,1,{x:e,ease:b.a.easeOut})}this.renderer.render(this.scene,this.camera),this.drawWave(),requestAnimationFrame(this.animate.bind(this))}},{key:"radians",value:function(e){return e*Math.PI/180}}]),o}())}),y=function(e){var t=n.a.useState(" "),a=Object(c.a)(t,2),o=a[0],i=a[1],l=n.a.useState(" "),s=Object(c.a)(l,2),r=s[0],u=s[1],h=n.a.useRef(),m=n.a.useRef();return n.a.useEffect((function(){m.current=C(h.current,e.bgColor,e.fgColor)}),[]),n.a.useEffect((function(){e.onPlay?m.current.play():m.current.pause()}),[e.onPlay]),n.a.useEffect((function(){m.current.setSceneColor(e.bgColor)}),[e.bgColor]),n.a.useEffect((function(){m.current.setTalesColor(e.fgColor)}),[e.fgColor]),n.a.useEffect((function(){m.current.setSongFile(e.mp3File)}),[e.mp3File]),n.a.useEffect((function(){var t=e.fileName.replace(".mp3","").split("-",2);i(t[1]),u(t[0])}),[e.fileName]),n.a.createElement("div",{className:"Audio3D",width:"65%",height:"100%",ref:h,style:{backgroundColor:e.bgColor}},n.a.createElement("h1",{style:{color:e.fgColor}},o),n.a.createElement("h2",{style:{color:e.fgColor}},r))},E=(a(140),a(77)),w=a(78);a(303),a(307);w.initializeApp({apiKey:"AIzaSyAYYs41KC3DqZL-_o4wqD1GGEugnGhPF8E",authDomain:"audio-visualizer-7580f.firebaseapp.com",databaseURL:"https://audio-visualizer-7580f.firebaseio.com",projectId:"audio-visualizer-7580f",storageBucket:"audio-visualizer-7580f.appspot.com",messagingSenderId:"639471632856",appId:"1:639471632856:web:2b49cb621d4a5531a9b2ad",measurementId:"G-DB51N4BCSX"});var k=w,S=function(e){return n.a.createElement("div",{className:"MixingBoard"},n.a.createElement("div",{className:"title"},n.a.createElement("h1",null,"Sound Mixer")),n.a.createElement("div",{className:"loaderPlayer"},n.a.createElement("input",{type:"file",id:"labelSong",accept:".mp3",onChange:function(t){var a=URL.createObjectURL(t.currentTarget.files[0]),o=t.currentTarget.files[0].name;console.log("/////// NEW MP3 FILE //////////"),console.log(a),console.log(o),e.setMp3File(a),e.setFileName(o)}}),n.a.createElement("label",{className:"button",id:"btn_black",for:"labelSong"},"Load Audio"),n.a.createElement("div",{className:"controls"},n.a.createElement("button",{className:"play",style:{display:e.onPlay?"none":"block"},onClick:function(){e.setOnPlay(!0)}},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",version:"1.1",width:"32",height:"32",viewBox:"0 0 25 32","data-tags":"play,media control"},n.a.createElement("g",{fill:"#000000",transform:"scale(0.03125 0.03125)"},n.a.createElement("path",{d:"M192 0v1024l640-511.264-640-512.736z"})))),n.a.createElement("button",{className:"pause",style:{display:e.onPlay?"block":"none"},onClick:function(){e.setOnPlay(!1)}},n.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",width:"32",height:"32",viewBox:"0 0 32 32","data-tags":"pause,media control"},n.a.createElement("g",{fill:"#000000",transform:"scale(0.03125 0.03125)"},n.a.createElement("path",{d:"M352 0h-192c-17.696 0-32 14.336-32 32v960c0 17.696 14.304 32 32 32h192c17.696 0 32-14.304 32-32v-960c0-17.664-14.304-32-32-32zM864 0h-192c-17.696 0-32 14.336-32 32v960c0 17.696 14.304 32 32 32h192c17.696 0 32-14.304 32-32v-960c0-17.664-14.304-32-32-32z"})))))),n.a.createElement("section",{id:"fg"},n.a.createElement("h2",null,"Figures Color"),n.a.createElement(E.CirclePicker,{color:e.fgColor,onChange:function(t){e.setFgColor(t.hex),console.log(t.hex),console.log(e.fgColor)}})),n.a.createElement("section",{id:"bg"},n.a.createElement("h2",null,"Background Color"),n.a.createElement(E.CirclePicker,{color:e.bgColor,onChange:function(t){e.setBgColor(t.hex),console.log(t.hex),console.log(e.bgColor)}})),n.a.createElement("div",{className:"windowButtons"},n.a.createElement("button",{className:"button",id:"btn_black",onClick:function(){k.firestore().collection("songs").add({mp3File:e.mp3File,fileName:e.fileName,fgColor:e.fgColor,bgColor:e.bgColor}),console.log("/////////// SE ACTUALIZ\xd3 FIREBASE //////////////")}},"save this song"),n.a.createElement("button",{className:"button",id:"btn_black",onClick:function(){e.setControllerCase(1)}},"your saved songs")))},F=a(331),N=a(333),x=a(334),L=a(332),O=a(121),z=a.n(O),A=a(120),T=a.n(A),P=a(123),M=a.n(P),B=a(122),j=a.n(B),I=(a(309),function(e){var t=JSON.parse(localStorage.getItem("songsList")),a=n.a.useState(0),o=Object(c.a)(a,2),i=o[0],l=o[1],s=function(a){console.log("//////// ingresa a selected song ///////////"),l(parseInt(a.currentTarget.dataset.index)),console.log(i);var o=t[i];e.setBgColor(o.bgColor),e.setFgColor(o.fgColor),e.setMp3File(o.mp3File),e.setFileName(o.fileName)};return n.a.createElement("div",{className:"Playlist"},n.a.createElement("div",{className:"title"},n.a.createElement("h1",null,"My Playlist")),null!=t?n.a.createElement(F.a,{component:"nav","aria-label":"main mailbox folders",className:"songs-list",id:"scrollbar"},t.map((function(e,t){return n.a.createElement(N.a,{button:!0,onClick:s,"data-index":t}," ",n.a.createElement(x.a,{primary:e.fileName.replace(".mp3","").split("-",2)[1],secondary:e.fileName.replace(".mp3","").split("-",2)[0]})," ",n.a.createElement(L.a,null," ",n.a.createElement(T.a,{style:{fill:e.fgColor}})," ",n.a.createElement(z.a,{style:{fill:e.bgColor}})," "),"  ")}))):n.a.createElement("h3",null,"First, you need to save your songs"),n.a.createElement("div",{className:"controls"},n.a.createElement(j.a,{button:!0,onClick:function(){console.log("////////// entra a previous song //////////"),console.log(i),console.log(t.length),l(0==i?t.length-1:i-1);var a=t[i];e.setBgColor(a.bgColor),e.setFgColor(a.fgColor),e.setMp3File(a.mp3File),e.setFileName(a.fileName)},style:{fill:"black"},fontSize:"large"}),n.a.createElement("button",{className:"play",style:{display:e.onPlay?"none":"block"},onClick:function(){e.setOnPlay(!0)}},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",version:"1.1",width:"32",height:"32",viewBox:"0 0 25 32","data-tags":"play,media control"},n.a.createElement("g",{fill:"#000000",transform:"scale(0.03125 0.03125)"},n.a.createElement("path",{d:"M192 0v1024l640-511.264-640-512.736z"})))),n.a.createElement("button",{className:"pause",style:{display:e.onPlay?"block":"none"},onClick:function(){e.setOnPlay(!1)}},n.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",width:"32",height:"32",viewBox:"0 0 32 32","data-tags":"pause,media control"},n.a.createElement("g",{fill:"#000000",transform:"scale(0.03125 0.03125)"},n.a.createElement("path",{d:"M352 0h-192c-17.696 0-32 14.336-32 32v960c0 17.696 14.304 32 32 32h192c17.696 0 32-14.304 32-32v-960c0-17.664-14.304-32-32-32zM864 0h-192c-17.696 0-32 14.336-32 32v960c0 17.696 14.304 32 32 32h192c17.696 0 32-14.304 32-32v-960c0-17.664-14.304-32-32-32z"})))),n.a.createElement(M.a,{button:!0,onClick:function(){console.log("////////// entra a next song //////////"),console.log(i),console.log(t.length),i===t.length-1?l(0):l(i+1);var a=t[i];e.setBgColor(a.bgColor),e.setFgColor(a.fgColor),e.setMp3File(a.mp3File),e.setFileName(a.fileName)},style:{fill:"black"},fontSize:"large"})),n.a.createElement("div",{className:"windowButtons"},n.a.createElement("button",{className:"button",id:"btn_black",onClick:function(){e.setControllerCase(0)}},"get back to Sound Mixer")))}),D=(a(311),n.a.createContext({bgColor:"#fff700",setBgColor:function(){return null},fgColor:"#ae12d4",setFgColor:function(){return null},mp3File:"https://iondrimbafilho.me/3d5/ocean_drive.mp3",setMp3File:function(){return null}}));var R=function(){var e=n.a.useState("#fff700"),t=Object(c.a)(e,2),a=t[0],o=t[1],i=n.a.useState("#ae12d4"),l=Object(c.a)(i,2),s=l[0],r=l[1],u=n.a.useState(!1),h=Object(c.a)(u,2),m=h[0],d=h[1],g=n.a.useState("https://iondrimbafilho.me/3d5/ocean_drive.mp3"),f=Object(c.a)(g,2),p=f[0],v=f[1],b=n.a.useState("Artista - T\xedtulo.mp3"),C=Object(c.a)(b,2),E=C[0],w=C[1],k=n.a.useState(0),F=Object(c.a)(k,2),N=F[0],x=F[1],L={bgColor:a,setBgColor:o,fgColor:s,setFgColor:r,onPlay:m,setOnPlay:d,mp3File:p,setMp3File:v,fileName:E,setFileName:w,controllerCase:N,setControllerCase:x};return n.a.createElement("div",{className:"AudioVisualizer"},n.a.createElement(D.Provider,{value:L},0==N?n.a.createElement(S,{setBgColor:o,setFgColor:r,setOnPlay:d,setMp3File:v,setFileName:w,setControllerCase:x,bgColor:a,fgColor:s,onPlay:m,mp3File:p,fileName:E}):n.a.createElement(I,{setControllerCase:x,setBgColor:o,setFgColor:r,setOnPlay:d,setMp3File:v,setFileName:w,onPlay:m}),n.a.createElement(y,{bgColor:a,fgColor:s,onPlay:m,mp3File:p,fileName:E})))};a(312);var q=function(){return n.a.createElement(s.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(r.a,{from:"/",to:"/home"}),n.a.createElement(r.d,null,n.a.createElement(r.b,{path:"/home",component:m}),n.a.createElement(r.b,{path:"/audiovisualizer",component:R}))))};l.a.render(n.a.createElement(q,null),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.8dd6bbec.chunk.js.map